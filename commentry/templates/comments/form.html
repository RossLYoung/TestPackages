{% load comments i18n %}
{% load crispy_forms_tags %}

{% if user.is_authenticated %}

    <form action="{% comment_form_target %}" method="post">

        {% crispy form %}

        <div class="form-actions">
            <input
                type="submit"
                name="submit"
                value="Post"
                class="btn btn-primary pull-right"
                id="{{ object.id }}"
            >
        </div>

        <div class='clearfix'></div>

        {% if node.id %}
            <input type="hidden" name="parent" id="parent_id" value="{{ node.id }}" />
        {% endif %}

        <input type="hidden" name="next" value="{% url 'commentry.views.thing' object.id %}" />

    </form>

{% else %}
    {% include 'comments/login_to_comment.html' %}
{% endif %}

{#Some other mostly working forms....#}

{##}
{#{% if user.is_authenticated %}#}
{##}
{#    {% get_comment_form for object as form %}#}
{#    <form action="{% comment_form_target %}" method="POST">#}
{#        {% csrf_token %}#}
{#        {% if node.id %}#}
{#            <input type="hidden" name="parent" id="parent_id" value="{{ node.id }}" />#}
{#        {% endif %}#}
{#        {{ form.comment }}#}
{#        {{ form.honeypot }}#}
{#        {{ form.content_type }}#}
{#        {{ form.object_pk }}#}
{#        {{ form.timestamp }}#}
{#        {{ form.security_hash }}#}
{#        <input type="hidden" name="next" value="{% url 'commentry.views.thing' object.id %}" />#}
{#        <input type="submit" value="Add comment" id="{{ object.id }} />#}
{#    </form>#}
{#{% else %}#}
{#    {% include 'comments/login_to_comment.html' %}#}
    {#<p>Please <a href="{% url 'auth_login' %}">log in</a> to leave a comment.</p>#}
{#{% endif %}#}



{##}
{##}
{#{% if user.is_authenticated %}#}


{#    <form action="{% comment_form_target %}" method="post">{% csrf_token %}#}
{#      {% if next %}<div><input type="hidden" name="next" value="{{ next }}" /></div>{% endif %}#}
{#      {% for field in form %}#}
{#        {% if field.is_hidden %}#}
{#          <div>{{ field }}</div>#}
{#        {% else %}#}
{#          {% if field.errors %}{{ field.errors }}{% endif %}#}
{#          <p#}
{#            {% if field.errors %} class="error"{% endif %}#}
{#            {% ifequal field.name "honeypot" %} style="display:none;"{% endifequal %}>#}
{#            {{ field.label_tag }} {{ field }}#}
{#          </p>#}
{#        {% endif %}#}
{#      {% endfor %}#}
{##}
{#        {% if node.id %}#}
{#            <input type="hidden" name="parent" id="parent_id" value="{{ node.id }}" />#}
{#        {% endif %}#}
{##}
{#      <p class="submit">#}
{#        <input type="submit" name="post" class="submit-post" value="{% trans "Post" %}" />#}
{#        <input type="submit" name="preview" class="submit-preview" value="{% trans "Preview" %}" />#}
{#      </p>#}
{#    </form>#}

{#    <form action="{% comment_form_target %}" method="post">#}
{#        {% csrf_token %}#}
{##}
{#        {{ form.object_pk }}#}
{##}
{#        {{ form.content_type }}#}
{##}
{#        {{ form.timestamp }}#}
{##}
{#        {{ form.security_hash }}#}
{##}
{#        {% if node.id %}#}
{##}
{#            <input type="hidden" name="parent" id="parent_id" value="{{ node.id }}" />#}
{##}
{#        {% endif %}#}
{##}
{#        {{ form.comment }}#}
{##}
{#        <input type="submit" >#}
{##}
{#    </form>#}